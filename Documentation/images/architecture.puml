@startuml GuardVision Architecture
skinparam monochrome true
skinparam shadowing false

rectangle "Input Sources" {
  [Webcam] as webcam
  [IP Camera] as ipcam
  [Video File] as video
}

rectangle "Core System" {
  rectangle "Model Manager" as modelmgr {
    [Action Recognition\nModel] as action
    [Crowd Density\nModel] as crowd
  }
  
  [Thread Pool] as threads
  [Prediction\nEngine] as engine
}

rectangle "UI/Output" {
  [Streamlit UI] as ui
  [Alerts Dashboard] as alerts
  [Export Logs] as logs
}

webcam --> modelmgr : RTSP/HTTP
ipcam --> modelmgr : Video Stream
video --> modelmgr : File Input

modelmgr --> threads : Async Processing
threads --> engine : Batch Predictions
engine --> ui : Real-time Annotations
engine --> alerts : JSON Events
alerts --> logs : CSV/JSON

note right of modelmgr
  <b>Key Features:</b>
  1. Multi-model ensemble
  2. Thread-safe queues
  3. Dynamic load balancing
end note

@enduml
